import{d as y,b as B,p as v,j as k,o as b,c as h,g as e,n as E,u as s,k as f,x as m,q as A,f as _,_ as V,w as j,C as $,i as D,l as F,y as N,A as d,e as M,h as S,B as z}from"./index.72c8a0d3.js";const T={class:"pt-5 px-3"},q={class:"bg-white"},I={class:"flex p-5 items-center justify-between"},U=e("h2",{class:"text-3xl font-bold"},"\uB3D9\uC601\uC0C1 \uC138\uBD80\uC815\uBCF4",-1),L={class:"flex gap-6"},P=["disabled"],R={class:"flex p-5 gap-5"},Y={class:"flex flex-col w-4/5"},G={class:"w-1/5"},H={key:0,width:"320",height:"240",controls:""},J=["src"],K=D(" Your browser does not support the video tag. "),O={class:"p-5 bg-gray-200"},Q={class:"flex justify-between"},W=e("h2",null,"\uB3D9\uC601\uC0C1 \uB9C1\uD06C",-1),te=y({__name:"Modify",setup(X){const C=F(),o=N().params.key,a=B(()=>C.getters["Video/infomation"]),n=v(""),i=v("");function x(u){const t="clipboard-write";navigator.permissions.query({name:t}).then(r=>{r.state=="granted"&&c(u),r.onchange=()=>{r.state=="granted"&&c(u)}})}function c(u){navigator.clipboard.writeText(`http://localhost:3000/${u}`).then(function(){d.wakeup({title:"\uC644\uB8CC",contents:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBE44\uB514\uC624\uB9C1\uD06C\uAC00 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})},function(){d.wakeup({title:"\uC2E4\uD328",contents:"\uBE44\uB514\uC624\uB9C1\uD06C\uB97C \uBCF5\uC0AC\uD558\uB294\uB370 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."})})}function g(){n.value=a.value.title,i.value=a.value.subject}function w(){C.dispatch("Video/updateInfomation",{key:o,title:n.value,subject:i.value}).then(u=>{d.wakeup({title:"\uC644\uB8CC",contents:"\uBE44\uB514\uC624 \uC815\uBCF4\uB97C \uC218\uC815\uD558\uC600\uC2B5\uB2C8\uB2E4",duration:3e3}),z.push({name:"mylist"})}).catch(u=>{d.wakeup({title:"\uC2E4\uD328",contents:"\uBE44\uB514\uC624 \uC815\uBCF4\uB97C \uC218\uC815\uD558\uB294\uB370 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4.",duration:5e3})})}const p=B(()=>!(n.value!=a.value.title||i.value!=a.value.subject));return k(()=>{C.dispatch("Video/getVideoInfomation",{key:o}).then(u=>{n.value=a.value.title,i.value=a.value.subject})}),(u,t)=>{const r=M("router-link");return b(),h("form",{onSubmit:t[4]||(t[4]=$(l=>w(),["prevent"]))},[e("div",T,[e("div",q,[e("div",I,[U,e("div",L,[e("button",{class:"text-blue-700",type:"button",onClick:t[0]||(t[0]=l=>g())},"\uBCC0\uACBD\uC0AC\uD56D \uCDE8\uC18C"),e("button",{class:E(["px-3 py-2 border rounded text-white",[s(p)?"border-gray-200 bg-gray-200":"border-blue-700 bg-blue-700"]]),type:"submit",disabled:s(p)},"\uC800\uC7A5",10,P)])]),e("div",R,[e("div",Y,[f(e("textarea",{class:"w-full h-30 p-3 border border-gray-500 rounded resize-none",placeholder:"\uC81C\uBAA9","onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l)},null,512),[[m,n.value]]),f(e("textarea",{class:"w-full flex-auto mt-3 p-3 border border-gray-500 rounded resize-none",placeholder:"\uB0B4\uC6A9","onUpdate:modelValue":t[2]||(t[2]=l=>i.value=l)},null,512),[[m,i.value]])]),e("div",G,[s(o)?(b(),h("video",H,[e("source",{src:`http://localhost:3000/api/video/stream?key=${s(o)}`,type:"video/mp4"},null,8,J),K])):A("",!0),e("div",O,[e("section",Q,[W,_(V,{class:"cursor-pointer",icon:"files",onClick:t[3]||(t[3]=l=>x(s(o)))})]),_(r,{class:"mt-3 text-blue-700",to:{name:"watch",params:{key:s(o)}}},{default:j(()=>[D(S(`http://localhost:3000/${s(o)}`),1)]),_:1},8,["to"])])])])])])],32)}}});export{te as default};
